// src/scss/components/_reviews.scss
@use '@/scss/theme/variables' as *;
@use '@/scss/theme/mixins' as *;

/* Sección */
.reviews {
  @include container;
  padding-block: 2rem;
}

.reviews-header { margin-bottom: 1rem; }
.reviews-summary { font-weight: 500; }

/* Carrusel */
.reviews-carousel {
  position: relative;
}

/* Viewport con scroll horizontal + scroll-snap */
.reviews-viewport {
  overflow-x: auto;
  overflow-y: visible;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;

  /* padding para que el primer/último slide no queden pegados */
  scroll-padding-left: 1rem;

  /* --- Alto visual acorde a las cards (sombra incluida) --- */
  padding-block: 1rem;   /* da “aire” arriba/abajo para la sombra */

  /* BFC: evita colapsos de margen y mide altura por su contenido */
  display: flow-root;
}

/* Pista de tarjetas */
.reviews-track {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  gap: 1rem;
  align-items: stretch;
}

/* Tarjeta */
.review-card {
  @include card();

  /* Scroll snap en cada tarjeta */
  scroll-snap-align: start;
  scroll-snap-stop: always;

  /*
    Móvil: 1 tarjeta visible, pero no al 100% de ancho.
    clamp(minimo, preferido, máximo) → evitamos cards gigantes.
  */
  min-width: clamp(10rem, 75vw, 14rem);
  max-width: 22rem;

  @include mq-tablet {
    /* 
      Tablet: 2 reseñas por vista, algo más estrechas para que "respiren".
      El clamp permite que no se vayan demasiado grandes en tablets anchas.
    */
    .review-card { 
      min-width: clamp(10rem, 46vw, 14rem);
      max-width: 24rem;
    }
}

@include mq-desktop {
  /* 
    Desktop: 3 reseñas por vista aprox. El clamp evita que sobresalgan.
  */
  .review-card { 
    min-width: clamp(10rem, 30vw, 14rem);
    max-width: 24rem;
  }
}
}



/* Cabezera de la tarjeta: autor + estrellas */
.review-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: .75rem;
}

.review-author {
  font-weight: 600;
  font-size: 1.1rem;
  line-height: 1.5;
  display: block;     /* se queda en su propia línea */

}

.review-stars  { 
  letter-spacing: 1px; 
  white-space: nowrap; 
  font-size: .95rem; 
}

/* Texto (con clamp) */
.review-text {
  margin: .25rem 0 .75rem;
  line-height: 1.8;
  // texto ajustado y justificado para que no haya espacios innecesarios a la vista
  text-align: justify;
  text-justify: inter-word;
  text-wrap: pretty;            /* Chrome/Safari modernos suavizan espacios */
  hyphens: auto;                /* cortes silábicos según lang=es */
  -webkit-hyphens: auto;
  -ms-hyphens: auto;
  overflow-wrap: anywhere;      /* permite romper palabras larguísimas */
  word-break: normal;

  @include clamp-lines(8);
}

/* Enlace */
.review-link {
  background: $color-bg;
  font-family: $font-family-main;
  color: $color-bg-2;
  border-radius: 4px;
  font-size: 1rem;
  line-height: 1;    /* fija la altura del botón */
  border: none;
  padding: 0.5rem 0.75rem;
  align-self: flex-start;
  text-decoration: underline;
  text-decoration-color: transparent; /* subrayado oculto al inicio */
  text-underline-offset: 0.2em;
  text-decoration-thickness: 2px;

  transition:
    background-color .28s cubic-bezier(.22,.61,.36,1),
    color .28s cubic-bezier(.22,.61,.36,1),
    box-shadow .28s cubic-bezier(.22,.61,.36,1),
    transform .18s cubic-bezier(.22,.61,.36,1),
    text-decoration-color .18s ease,
    letter-spacing .18s cubic-bezier(.22,.61,.36,1);

  &:hover {
    transform: translateY(-1px);
    letter-spacing: 0.2px;       /* énfasis tipográfico muy leve */

    /* activa el subrayado de forma suave */
    text-decoration-color: currentColor;

    cursor: pointer;
  }

  &:active {
    transform: translateY(0); /* vuelve a su sitio al “click” */
    box-shadow: 0 2px 6px rgba(0,0,0,.12);
    opacity: 0.95;
  }

  &:focus-visible {
    @include focus-ring;
  }
}

/* Respeto a usuarios con reducción de movimiento */
@media (prefers-reduced-motion: reduce) {
  .review-link {
    transition: none;
  }
}

/* Flechas */
.reviews-arrow {
  position: absolute;
  top: 50%;
  translate: 0 -50%;
  z-index: 2;
  display: grid;
  place-items: center;
  width: 40px; height: 40px;
  border: 1px solid rgba($color-dark-bg, .12);
  border-radius: 999px;
  background: rgba($color-bg, .95);
  backdrop-filter: blur(6px);
  cursor: pointer;
  transition: background-color .15s ease, transform .15s ease, opacity .15s ease;

  &:hover { background: rgba($color-primary, .08); }
  &:focus-visible { @include focus-ring; }
  &:active { transform: translateY(-50%) scale(.98); }

  &--prev { left: -.25rem; }
  &--next { right: -.25rem; }

  &:disabled {
    opacity: .35;
    pointer-events: none;
  }

  .material-symbols-outlined {
    font-size: 22px;   /* icono dentro del botón de 40x40 */
    line-height: 1;
  }
}

/* Skeleton simple (si lo usas) */
#reviews-skeleton {
  width: 100%;
  height: 2.25rem;
  border-radius: 8px;
  background: linear-gradient(90deg, rgba($color-black, .05) 0%, rgba($color-black, .08) 50%, rgba($color-black, .05) 100%);
  background-size: 200% 100%;
  animation: reviews-skeleton 1.2s ease-in-out infinite;
}
@keyframes reviews-skeleton { 0% {background-position:0 0;} 100% {background-position:200% 0;} }
