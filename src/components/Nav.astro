---
// Array con las rutas y nombres de los enlaces de la navegación principal del web.
const links = [
  { href: "/", label: "Inicio" },
  { href: "/carta", label: "Carta" },
  { href: "/contacto", label: "Nosotros" },
  { href: "/trabajo", label: "Únete al equipo" },
];
---
<header class="site-header">
  <div class="site-header__inner">
    <a class="site-logo" href="/">
      <img src="/NuevoLogoWhite250px.png" alt="Kome Kome" />
    </a>

    <!-- Botón hamburguesa (visible en móvil) -->
    <button class="nav-toggle" aria-controls="site-nav" aria-expanded="false">
      <span class="nav-toggle__bar"></span>
      <span class="nav-toggle__bar"></span>
      <span class="nav-toggle__bar"></span>
      <span class="sr-only">Abrir menú</span>
    </button>

    <!-- Navegación -->
    <nav id="site-nav" class="site-nav" data-open="false">
      <ul class="site-nav__list">
        <li><a href="/" aria-current="page">Inicio</a></li>
        <li><a href="/carta/">Carta</a></li>
        <li><a href="/contacto/">Contacto</a></li>
        <li><a href="/trabajo/">Trabajo</a></li>
      </ul>
    </nav>
  </div>
</header>

<!-- Estilos específicos -->
<style lang="scss">
  /* helper accesible para el texto del botón */
  @use '@/scss/theme/mixins' as *;
  .sr-only { @include hide-visually; }
</style>

<script is:inline>
  // Toggle accesible (abre/cierra y actualiza ARIA)
  const btn = document.querySelector('.nav-toggle');
  const nav = document.getElementById('site-nav');

  function toggleNav(force) {
    const open = (typeof force === 'boolean') ? force : (nav.dataset.open !== 'true');
    nav.dataset.open = String(open);
    btn.setAttribute('aria-expanded', String(open));
  }

  btn?.addEventListener('click', () => toggleNav());

  // Cerrar al pulsar Escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') toggleNav(false);
  });

  // Cerrar al hacer click fuera
  document.addEventListener('click', (e) => {
    if (!nav.contains(e.target) && !btn.contains(e.target)) toggleNav(false);
  });

  // Cerrar al hacer click en link
  nav?.addEventListener('click', (e) => {
    const a = e.target.closest('a');
    if (a) toggleNav(false);
  });
</script>
